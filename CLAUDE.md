# TELEGRAM MINI APP ‚Äî Claude Context

> –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-02-26

## üóÇ –≠–ö–û–°–ò–°–¢–ï–ú–ê –ü–†–û–ï–ö–¢–û–í

> –≠—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–∞ –≤–æ –≤—Å–µ—Ö —Ç—Ä—ë—Ö CLAUDE.md.
> Claude Code —á–∏—Ç–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏ –∏ –ø–æ–Ω–∏–º–∞–µ—Ç –≤—Å—é —Å–∏—Å—Ç–µ–º—É —Å—Ä–∞–∑—É.

| –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π | –ë–æ—Ç / –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—É—Ç—å –Ω–∞ –º–∞—à–∏–Ω–µ |
|-------------|-------------|-----------|----------------|
| **fitness-coach-system** | ‚Äî | CS FITNESS CRM: –¥–∞—à–±–æ—Ä–¥—ã, —Ç—Ä–µ–∫–µ—Ä, Master API v7.0 | `projects/fitness-coach-system/` |
| **Telegram_Mini_App** | @fitprogabot | –§–∏—Ç–ü—Ä–æ–≥–∞: Telegram-–±–æ—Ç —Ç—Ä–µ–Ω–µ—Ä–∞ + Mini App —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ | `projects/Telegram_Mini_App/` |
| **exercise-video-bot** | @gif_converter_bot | –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∏–¥–µ–æ‚ÜíGIF –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –§–∏—Ç–ü—Ä–æ–≥–∏ | `projects/exercise-video-bot/` |

## üîó –û–ë–©–ê–Ø SUPABASE

–í—Å–µ —Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–¥–∏–Ω** –∏–Ω—Å—Ç–∞–Ω—Å Supabase.
`SUPABASE_URL` –∏ `SUPABASE_KEY` ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–æ –≤—Å–µ—Ö `.env`.

–ö–ª—é—á–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `users` ‚Äî —Ç—Ä–µ–Ω–µ—Ä—ã –∏ –∫–ª–∏–µ–Ω—Ç—ã (@fitprogabot)
- `exercises` ‚Äî –±–∞–∑–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (–æ–±—â–∞—è –¥–ª—è CRM –∏ –±–æ—Ç–∞)
- `programs` ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- `reports` ‚Äî –æ—Ç—á—ë—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ Mini App
- `clients`, `workout_sessions`, `workout_log` ‚Äî CS FITNESS CRM

‚ö†Ô∏è –¢–∞–±–ª–∏—Ü–∞ `exercises` ‚Äî **–æ–±—â–∞—è** –¥–ª—è fitness-coach-system –∏ Telegram_Mini_App.
GIF –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `exercises.gif_url` / `exercises.video_url`.

## üìä –û–ë–©–ò–ô –°–¢–ê–¢–£–° –≠–ö–û–°–ò–°–¢–ï–ú–´
–ê–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Ç—Ä—ë—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤: `../STATUS_ALL_PROJECTS.md`
```

**–ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ñ–∞–π–ª:** –∫–æ–≥–¥–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—à—å –∫—Ä—É–ø–Ω—ã–π —ç—Ç–∞–ø ‚Äî –ø—Ä–æ—Å–∏—à—å Claude Code:
```
–æ–±–Ω–æ–≤–∏ ../STATUS_ALL_PROJECTS.md ‚Äî –æ—Ç–º–µ—Ç—å [–∑–∞–¥–∞—á–∞] –∫–∞–∫ Done

## üîó –°–í–Ø–ó–ò –ú–ï–ñ–î–£ –ü–†–û–ï–ö–¢–ê–ú–ò

exercise-video-bot (@gif_converter_bot)
    ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ –≤ GIF
    ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Supabase Storage
    ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç exercises.gif_url

Telegram_Mini_App (@fitprogabot)
    ‚Üí —Ç—Ä–µ–Ω–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
    ‚Üí —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
    ‚Üí –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç GIF –≤ Mini App —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
    ‚Üí –æ—Ç—á—ë—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É reports

fitness-coach-system (CRM)
    ‚Üí –¥–∞—à–±–æ—Ä–¥—ã –∏ —Ç—Ä–µ–∫–µ—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
    ‚Üí Master API v7.0
    ‚Üí —Ç–∞ –∂–µ –±–∞–∑–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ Supabase

## üõ† –ö–ê–ö –†–ê–ë–û–¢–ê–¢–¨ –° –ù–ï–°–ö–û–õ–¨–ö–ò–ú–ò –†–ï–ü–û –ß–ï–†–ï–ó CLAUDE CODE

–ó–∞–ø—É—Å–∫–∞–π claude –∏–∑ –ª—é–±–æ–≥–æ —Ä–µ–ø–æ –∏ –æ–±—Ä–∞—â–∞–π—Å—è –∫ –¥—Ä—É–≥–∏–º –ø–æ –ø—É—Ç–∏:
  "–ø—Ä–æ—á–∏—Ç–∞–π ../exercise-video-bot/bot/main.py"
  "—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π —Å—Ö–µ–º—É —Å ../fitness-coach-system/supabase/migrations/"

---

## –û –ü–†–û–ï–ö–¢–ï

- **–ë–æ—Ç**: @fitprogabot (python-telegram-bot v20, async)
- **Mini App**: `Telegram_Mini_App/miniapp/index.html` (Vanilla JS, Telegram WebApp API, Supabase JS)
- **Backend**: Supabase (Python SDK supabase==2.x –≤ –±–æ—Ç–µ; Supabase JS –≤ Mini App)
- **–î–µ–ø–ª–æ–π –±–æ—Ç–∞**: Railway
- **–î–µ–ø–ª–æ–π Mini App**: GitHub Pages / Netlify
- **–Ø–∑—ã–∫ –±–æ—Ç–∞**: Python 3.11

## –°–¢–†–£–ö–¢–£–†–ê

```
Telegram_Mini_App/           # –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îú‚îÄ‚îÄ CLAUDE.md                # —ç—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ Telegram_Mini_App/       # –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py          # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/        # start, trainer, client, settings
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/              # supabase.py ‚Äî –∫–ª–∏–µ–Ω—Ç –∏ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage/        # gif.py ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ GIF –≤ Supabase Storage
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/           # menu, formatter, dedupe, reply_no_dup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants/      # categories.py ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ miniapp/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html       # –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Mini App (–ø—Ä–æ–≥—Ä–∞–º–º–∞ + –æ—Ç—á—ë—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UX_COPY_FINAL.md       # –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤ –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ö–û–ú–ê–ù–î–´_–ò_–û–¢–í–ï–¢–´_–ë–û–¢–ê.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ROADMAP.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CHECKLIST_PHASE1_1.8.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MCP_–ù–ê–°–¢–†–û–ô–ö–ê.md
‚îÇ   ‚îú‚îÄ‚îÄ scripts/            # delete_test_accounts, send_test_report, set_trainer_role, check_supabase, delete_client
‚îÇ   ‚îú‚îÄ‚îÄ supabase/            # WEBHOOK_SETUP.md
‚îÇ   ‚îú‚îÄ‚îÄ check_db_connection.py
‚îÇ   ‚îî‚îÄ‚îÄ run_migration.py
```

## HANDLERS

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `bot/handlers/start.py` | `/start`, –≤—ã–±–æ—Ä —Ä–æ–ª–∏ (—Ç—Ä–µ–Ω–µ—Ä/–∫–ª–∏–µ–Ω—Ç), deep link `add_<trainer_id>` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–Ω—é —Ç—Ä–µ–Ω–µ—Ä–∞ |
| `bot/handlers/trainer.py` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (`/addclient`, ¬´–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞¬ª), –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (—Å—Ç–æ–∫/–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ GIF/—Å—Å—ã–ª–∫–∏), —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã (ConversationHandler), –ø–æ–≤—Ç–æ—Ä/–æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (ConversationHandler), –æ–±—Ä–∞–±–æ—Ç–∫–∞ WebApp Data –æ—Ç Mini App |
| `bot/handlers/client.py` | –û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–æ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –æ—Ç—á—ë—Ç—ã) |
| `bot/handlers/settings.py` | –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫: –ø–æ–¥—Å–∫–∞–∑–∫–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç—á—ë—Ç–∞—Ö, —Ä–µ–∂–∏–º –º–µ–Ω—é (–∞–≤—Ç–æ/–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ); callback-–∫–Ω–æ–ø–∫–∏ |

## –ë–ê–ó–ê –î–ê–ù–ù–´–•

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ **–µ–¥–∏–Ω–æ–π –ë–î fitness-coach-system**. –¢–∞–±–ª–∏—Ü—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç—Ç–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º (Supabase):

- **users** ‚Äî id (Telegram), username, full_name, role (trainer|client), trainer_id (—É –∫–ª–∏–µ–Ω—Ç–æ–≤), settings (JSONB: hints_enabled, notifications_enabled, menu_state)
- **exercises** ‚Äî telegram_trainer_id, telegram_client_id (null = —Å—Ç–æ–∫), name, category, source_type, gif_url, ext_url
- **programs** ‚Äî telegram_trainer_id, telegram_client_id, name, exercises (JSONB), mode, mandatory_tasks, status
- **reports** ‚Äî program_id, client_id, trainer_id, data (–º–∞—Å—Å–∏–≤ –æ—Ç—á—ë—Ç–æ–≤ –ø–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º)

Storage: –±–∞–∫–µ—Ç `exercise-gifs`, –ø—É—Ç–∏ `{trainer_id}/stock/{category}/{name}.gif` –∏ `{trainer_id}/clients/{client_id}/{name}.gif`.

## –¢–ï–ö–°–¢–´ –ë–û–¢–ê

–í—Å–µ —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äî –≤ **docs/UX_COPY_FINAL.md**  
–ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.

## MCP –ò–ù–°–¢–†–£–ú–ï–ù–¢–´

- Context7: use library /python-telegram-bot/python-telegram-bot
- Context7: use library /supabase/supabase-py
- Supabase MCP: –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü –ø–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º SQL

## –ü–†–ê–í–ò–õ–ê

- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ async/await (python-telegram-bot v20 ‚Äî —Ç–æ–ª—å–∫–æ async)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- snake_case –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –û–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–∏–Ω handler (–ª–æ–≥–∏—á–µ—Å–∫–∏: start, trainer, client, settings)
- –í –∫–æ–º–º–∏—Ç–∞—Ö, –º–∏–≥—Ä–∞—Ü–∏—è—Ö, –≤—ã–≤–æ–¥–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å ‚Äî —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞ (—Å–º. .cursor/rules/encoding-latin-only.mdc)

## –¢–ï–ö–£–©–ò–ï –ó–ê–î–ê–ß–ò

- **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –µ–¥–∏–Ω—É—é –ë–î fitness-coach-system** ‚Äî Done (2026-02-26).

–ü–æ `docs/ROADMAP.md`:

- **–§–∞–∑–∞ 2**: UX-—Ç–µ–∫—Å—Ç—ã –∏ –ø—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º –º–µ–Ω—é, –ø—É—Å—Ç—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏, —É—á—ë—Ç hints_enabled).
- **–§–∞–∑–∞ 3**: FAQ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä —Ç–µ–∫—Å—Ç–∞ (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –æ—Ç–≤–µ—Ç—ã FAQ, fallback).
- **–§–∞–∑–∞ 4**: Mini App —Ç–µ–∫—Å—Ç—ã, —Ñ–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–∞ —Ç—Ä–µ–Ω–µ—Ä—É, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞ —Å —É—á—ë—Ç–æ–º notifications_enabled.
- **–§–∞–∑–∞ 5**: –î–µ–ø–ª–æ–π (Railway, Mini App –≤ –ø—Ä–æ–¥), webhook –æ—Ç—á—ë—Ç–æ–≤, RLS, pytest –¥–ª—è —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ –∏ db.

–û—Ç–∫—Ä—ã—Ç—ã—Ö TODO/FIXME –≤ –∫–æ–¥–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.

## üîÑ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –° –î–†–£–ì–ò–ú–ò –ü–†–û–ï–ö–¢–ê–ú–ò

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã **exercises**:
‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å fitness-coach-system (–æ–±—â–∞—è —Ç–∞–±–ª–∏—Ü–∞)
‚Üí –£–≤–µ–¥–æ–º–∏—Ç—å exercise-video-bot (–ø–∏—à–µ—Ç gif_url –≤ —Ç—É –∂–µ —Ç–∞–±–ª–∏—Ü—É)

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è GIF –∏–ª–∏ –ø–æ–ª–µ–π exercises:
‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Mini App (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è) –∏ —Å exercise-video-bot.
