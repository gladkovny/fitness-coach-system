# Supabase vs Google Sheets — простое объяснение

> Для владельца без IT-опыта. Как было (Sheets) и как стало (Supabase).

---

## Раньше: Google Sheets

Ты открывал таблицу в браузере и видел данные в ячейках:
- **Листы** = отдельные таблицы (Coach_Master, Yaroslav_Tracker, Kirill_Tracker...)
- **Строки** = записи (клиент, тренировка, подход)
- **Колонки** = поля (дата, вес, повторения)
- **Редактирование** = вручную в ячейке или через скрипт (GAS)

**Плюс:** всё наглядно, можно править вручную, экспорт в Excel.  
**Минус:** нет входа по логину, ограничения API, сложно масштабировать.

---

## Сейчас: Supabase

Supabase — это "облачная база данных с API". Ты не видишь ячейки, но данные там же, только по-другому устроены.

### Как это устроено (простыми словами)

| Google Sheets | Supabase |
|---------------|----------|
| Лист "Клиенты" | Таблица `clients` |
| Лист "Тренировки" | Таблица `workout_sessions` |
| Лист "Подходы" | Таблица `workout_sets` |
| Строка 5 | Запись (row) с id |
| Колонка A | Поле (column) |

### Откуда берутся данные

```
┌─────────────────────────────────────────────────────────────────────┐
│                        КАК ЭТО РАБОТАЕТ                             │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   РАНЬШЕ (Sheets):                                                  │
│                                                                     │
│   [Трекер] ──► [GAS скрипт] ──► [Google Sheets]                     │
│   [Дашборд] ◄── [GAS скрипт] ◄── [Google Sheets]                    │
│                                                                     │
│   GAS = посредник. Читает/пишет в Sheets.                           │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   СЕЙЧАС (Supabase):                                                │
│                                                                     │
│   [Трекер] ──► [Supabase JS] ──► [PostgreSQL]                       │
│   [Дашборд] ◄── [Supabase JS] ◄── [PostgreSQL]                      │
│                                                                     │
│   Supabase JS = библиотека в браузере. Говорит с базой напрямую.    │
│   Нет посредника в виде GAS.                                        │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Как "править данные" в Supabase

| Действие | В Sheets | В Supabase |
|----------|----------|------------|
| Посмотреть данные | Открыть таблицу | Supabase Dashboard → Table Editor |
| Добавить строку | Вставить строку, заполнить ячейки | Table Editor → Insert row |
| Изменить строку | Редактировать ячейку | Table Editor → клик по ячейке |
| Удалить строку | Удалить строку | Table Editor → Delete |
| Сложный запрос (фильтр, сортировка) | Формулы, фильтры | SQL Editor → `SELECT ... WHERE ...` |

**Supabase Dashboard** — это твой "новый Sheets":
- https://supabase.com/dashboard → твой проект
- **Table Editor** — аналог листов, визуальное редактирование
- **SQL Editor** — для сложных запросов (как формулы, но на языке SQL)

### Безопасность (RLS)

В Sheets доступ был по ссылке. В Supabase — **Row Level Security (RLS)**:
- Каждая таблица проверяет: "кто запрашивает?"
- Тренер видит только своих клиентов
- Проверка идёт по `auth.uid()` (кто вошёл)

Ты не правишь RLS вручную — они уже настроены в миграциях.

---

## Файл конфигурации

Ключи для доступа к Supabase лежат в **`deploy/master/js/supabase-config.js`**:

```javascript
window.SUPABASE_URL = 'https://xxxx.supabase.co';
window.SUPABASE_ANON_KEY = 'eyJ...';
```

Все страницы (login, dashboard, tracker) берут их оттуда. Менять нужно только при смене проекта.

---

## Резюме

| Вопрос | Ответ |
|--------|-------|
| Где мои данные? | В Supabase (PostgreSQL), не в Sheets |
| Как посмотреть/править? | Supabase Dashboard → Table Editor или SQL Editor |
| Кто пишет данные? | Трекер и дашборд через Supabase JS (браузер) |
| Нужен ли GAS? | Для офлайн-клиентов — нет, для Марка — пока да |
| Можно ли вернуть Sheets? | Данные мигрированы; обратно — только экспортом |
