# –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ —Ñ–∞–∑–∞–º (ARCHITECTURE_V2)

> **–ì–ª–∞–≤–Ω—ã–π —Ä–æ–∞–¥–º–∞–ø —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º ¬´–µ–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –º–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤¬ª:** [ROADMAP_REFERENCE_ARCHITECTURE.md](ROADMAP_REFERENCE_ARCHITECTURE.md) ‚Äî —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å Reference Architecture, –ø–ª–∞–Ω –¥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è, –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–∑—ã.
>
> **Reference Architecture (6 —Å–ª–æ—ë–≤):** –¥–∏–∞–≥—Ä–∞–º–º–∞ [excalidraw-saas-reference-architecture.excalidraw.json](excalidraw-saas-reference-architecture.excalidraw.json) ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –≤ [excalidraw.com](https://excalidraw.com).
>
> –ö—Ä–∞—Ç–∫–∞—è –≤—ã–∂–∏–º–∫–∞ —Ñ–∞–∑ –Ω–∏–∂–µ ‚Äî –∏–∑ [ARCHITECTURE_V2.md](ARCHITECTURE_V2.md). –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ª–æ–∂–µ–Ω–æ –¥–æ –ø–æ–ª–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≤ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É.

---

## –§–∞–∑–∞ 1: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (–§–µ–≤—Ä–∞–ª—å 2026)

| –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°—Ä–æ–∫ |
|--------|-----------|------|
| –§–∏–∫—Å –≤—Å–µ—Ö –±–∞–≥–æ–≤ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã | üî¥ | 1 –Ω–µ–¥–µ–ª—è |
| –°—Ç–∞–±–∏–ª—å–Ω—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (—Ç–µ—Å—Ç –ê–ª—ë–Ω–∞) | üî¥ | 1 –Ω–µ–¥–µ–ª—è |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è | üü° | 2 –¥–Ω—è |
| –ë—ç–∫–∞–ø –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π | üî¥ | 1 –¥–µ–Ω—å |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∞—Ä–∫, –Ø—Ä–æ—Å–ª–∞–≤, –ö–∏—Ä–∏–ª–ª, –ê–ª—ë–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ —Å–±–æ–µ–≤.

---

## –§–∞–∑–∞ 2: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase (–ú–∞—Ä—Ç 2026)

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|--------|------------|
| –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ö–µ–º—ã –ë–î –≤ Supabase | ‚úÖ | –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ 00017 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ |
| –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö Coach Master | ‚úÖ | GAS MigrateToSupabase |
| –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ | ‚úÖ | –¢—Ä–µ–Ω–µ—Ä, –∫–ª–∏–µ–Ω—Ç—ã, –±–ª–æ–∫–∏, —Å–µ—Å—Å–∏–∏, daily |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (email + –ø–∞—Ä–æ–ª—å) | ‚úÖ | Supabase Auth, RLS |
| –§—Ä–æ–Ω—Ç Master –Ω–∞ Supabase | ‚úÖ | –í—Ö–æ–¥, –¥–∞—à–±–æ—Ä–¥, —Ç—Ä–µ–∫–µ—Ä, –∫–∞–±–∏–Ω–µ—Ç |
| –ù–æ–≤—ã–π API (Edge Functions) | üìã | parse-workout –µ—Å—Ç—å; –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ GAS ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| –î–∞—à–±–æ—Ä–¥/–ø—Ä–æ–≥—Ä–∞–º–º–∞ –ú–∞—Ä–∫–∞ –Ω–∞ Supabase | üìã | –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—É—Ä ‚Äî —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ dev / production | üü° | –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ Master:** –æ–¥–∏–Ω –∫–æ–Ω—Ç—É—Ä (–≤—Ö–æ–¥, –¥–∞—à–±–æ—Ä–¥, —Ç—Ä–µ–∫–µ—Ä, –∫–∞–±–∏–Ω–µ—Ç) –Ω–∞ Supabase. –ú–∞—Ä–∫ ‚Äî —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø.

**–ì–¥–µ –∫–æ–¥:** –ø–∞–ø–∫–∞ `supabase/` ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏, Edge Functions; `deploy/master/` ‚Äî —Ñ—Ä–æ–Ω—Ç.

---

## –§–∞–∑–∞ 3: –ù–æ–≤—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–ê–ø—Ä–µ–ª—å‚Äì–ú–∞–π 2026)

React PWA, –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ Olympus, —Ç—Ä–µ–∫–µ—Ä –∏ –¥–∞—à–±–æ—Ä–¥—ã. –°–º. ARCHITECTURE_V2.

---

## –§–∞–∑–∞ 4‚Äì6 (–æ—Ç–ª–æ–∂–µ–Ω–æ)

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Whoop, Apple, InBody) ‚Üí AI-–º–æ–¥—É–ª–∏ ‚Üí –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∏–ª–ª–∏–Ω–≥. –°–º. ARCHITECTURE_V2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–µ–π—á–∞—Å:** –µ–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤; –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É —Å–µ–±—è. –î–µ—Ç–∞–ª–∏: [ROADMAP_REFERENCE_ARCHITECTURE.md](ROADMAP_REFERENCE_ARCHITECTURE.md).

---

## –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Master API

| –ó–∞–¥–∞—á–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| **–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É email –≤ –ª–∏—Å—Ç Clients** | –í —Ç–∞–±–ª–∏—Ü–µ Coach Master, –ª–∏—Å—Ç Clients: –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `email` (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é, –µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è). –í —Å—Ç—Ä–æ–∫–µ —Ç—Ä–µ–Ω–µ—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ –±–µ–∑ spreadsheetId –∏–ª–∏ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö) –∑–∞–ø–æ–ª–Ω–∏—Ç—å email —Ç—Ä–µ–Ω–µ—Ä–∞. –ù—É–∂–Ω–æ –¥–ª—è –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–µ—Ä–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Supabase (—Å–≤–æ–π—Å—Ç–≤–æ `MIGRATION_TRAINER_EMAIL`) –∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ API. |

---

## –°–µ–π—á–∞—Å ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Supabase (—Å—Ç–∞—Ç—É—Å)

1. ‚úÖ –£—Ç–≤–µ—Ä–¥–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (ARCHITECTURE_V2)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `supabase/` –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å—Ö–µ–º–∞ –ë–î + RLS)
3. ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö: [supabase/MIGRATION_PLAN.md](supabase/MIGRATION_PLAN.md)
4. ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞: [supabase/SETUP_CHECKLIST.md](supabase/SETUP_CHECKLIST.md)
5. ‚úÖ –ü—Ä–æ–µ–∫—Ç Supabase —Å–æ–∑–¥–∞–Ω, –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (–≤ —Ç.—á. client_dashboard_settings)
6. ‚úÖ –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω (GAS MigrateToSupabase: —Ç—Ä–µ–Ω–µ—Ä, –∫–ª–∏–µ–Ω—Ç—ã, —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –ø—Ä–æ–≥—Ä–∞–º–º—ã, –±–ª–æ–∫–∏, —Å–µ—Å—Å–∏–∏, daily)
7. ‚úÖ Supabase Auth: email/password, —Ç—Ä–µ–Ω–µ—Ä —Å–≤—è–∑–∞–Ω —Å auth.users, RLS –ø–æ auth.uid()
8. ‚úÖ –§—Ä–æ–Ω—Ç Master –Ω–∞ Supabase: –≤—Ö–æ–¥ ([login.html](deploy/master/login.html)), –¥–∞—à–±–æ—Ä–¥, —Ç—Ä–µ–∫–µ—Ä, **–∫–∞–±–∏–Ω–µ—Ç —Ç—Ä–µ–Ω–µ—Ä–∞** (cabinet/ ‚Äî —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–∞—Ä—Ç–æ—á–∫–∞ —Å 6 –≤–∫–ª–∞–¥–∫–∞–º–∏, client_dashboard_settings)
9. ‚úÖ Edge Function parse-workout –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ (AI-–ø–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—Ñ–µ–≤—Ä–∞–ª—å 2026):**

| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|
| **–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è** | Unified Tracker v4.4, —Ñ–∏–∫—Å –±–∞–≥–æ–≤ –ø–æ —Ñ–∏–¥–±–µ–∫—É –Ø—Ä–æ—Å–ª–∞–≤–∞ –∏ –ö–∏—Ä–∏–ª–ª–∞. |
| **–û–Ω–±–æ—Ä–¥–∏–Ω–≥** | –¢–µ—Å—Ç –Ω–∞ –ê–ª–µ–Ω–µ, –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Goals –∏–∑ —Ñ–æ—Ä–º—ã. |
| **–ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—É—Ä –ú–∞—Ä–∫–∞** | –î–∞—à–±–æ—Ä–¥ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ú–∞—Ä–∫–∞ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ Supabase (—Å–º. [ROADMAP_REFERENCE_ARCHITECTURE.md](ROADMAP_REFERENCE_ARCHITECTURE.md)). |

---

## –ó–∞–¥–∞—á–∏ –Ω–∞ –±—É–¥—É—â–µ–µ (—Ñ–∏–∫—Å–∞—Ü–∏—è 31.01.2026)

| # | –ó–∞–¥–∞—á–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|----------|
| 1 | **–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –≤–µ—Å–µ** | –ë–∞–≥: –≤ –∫–∞–±–∏–Ω–µ—Ç–µ/–Ω–∞–≥—Ä—É–∑–∫–µ —Ç–æ–Ω–Ω–∞–∂ –¥–ª—è bodyweight = 0. –ú–µ—Ç–æ–¥–∏–∫–∞: docs/BODYWEIGHT_AND_INTENSITY.md, effectiveWeight = –≤–µ—Å_–∫–ª–∏–µ–Ω—Ç–∞ √ó exercises.bodyweight_ratio. –ü–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–∏ weight=0. –ü–æ–¥—Ä–æ–±–Ω–æ: docs/BUG_BODYWEIGHT_INTENSITY.md. |
| 2 | **–õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á—ë—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏, —Å–¥–µ–ª–∞—Ç—å –µ—ë ¬´—É–º–Ω–æ–π¬ª (RPE, volume, bodyweight_ratio –∏ —Ç.–¥.). |
| 3 | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –ö–∏—Ä–∏–ª–ª–∞** | –î–æ–±–∞–≤–∏—Ç—å mandatory_tasks –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –ö–∏—Ä–∏–ª–ª (SQL INSERT –≤ mandatory_tasks). |
| 4 | **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞** | –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É/—Ä–∞–∑–¥–µ–ª —Å –≤—ã–≤–æ–¥–æ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî —Ä–∞–≤–Ω–æ–ø—Ä–∞–≤–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ SQL Editor –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º. |
