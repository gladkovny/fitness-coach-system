# Git и GitHub — когда и как синхронизировать

**Кратко:** коммить после логичного куска работы, пушить когда хочешь сохранить на GitHub или закончил рабочий день.

---

## Шаблон сообщения коммита

**Сообщения коммитов — на английском**, чтобы на GitHub не было проблем с кодировкой.

```
[type] short description
```

| Тип | Когда использовать |
|-----|--------------------|
| `feature` | Новая функция |
| `fix` | Исправление бага |
| `docs` | Документация (README, инструкции) |
| `refactor` | Рефакторинг без изменения поведения |
| `chore` | Скрипты, конфиг, прочее |

**Примеры (English):**
- `[feature] Add Supabase tracker integration`
- `[fix] Fix dashboard loading`
- `[docs] Update Git workflow`

---

## Когда коммитить и пушить

| Ситуация | Действие |
|----------|----------|
| Закончил задачу (фичу, правку) | ✅ Коммит + push |
| Закончил рабочий день | ✅ Коммит + push |
| Сделал несколько мелких правок и всё работает | ✅ Один коммит + push |
| Сломал код, ещё чинишь | ❌ Не коммитить |
| Секреты (.env, ключи) в коде | ❌ Никогда не коммитить (они в .gitignore) |

**Правило:** один коммит = один осмысленный набор изменений.

---

## Полуавтоматический скрипт (рекомендуется)

Из корня проекта в PowerShell:

```powershell
.\scripts\git-push.ps1
```

Скрипт спросит:
1. **Тип изменений** (1–5)
2. **Краткое описание**
3. Покажет файлы и попросит подтвердить

Или с параметрами (без диалога):

```powershell
.\scripts\git-push.ps1 -Type docs -Message "Обновлён SYNC_STATUS"
.\scripts\git-push.ps1 "Простое описание без типа"
```

---

## Ручной способ

```powershell
cd C:\Users\n.gladkov\Desktop\fitness-coach-system

git status
git add .
git commit -m "[docs] Краткое описание изменений"
git push
```

**Шаблон для ручных коммитов:** в проекте есть `.gitmessage`. Чтобы Git подставлял его при `git commit` (без `-m`):

```powershell
git config commit.template .gitmessage
```

---

## Перед началом работы

```powershell
git pull
```

---

## Типичные ошибки

| Ошибка | Решение |
|--------|---------|
| `! [rejected]` при push | `git pull`, затем снова `git push` |
| Конфликт при pull | Git подскажет файлы; можно попросить Cursor/Claude помочь |
| Забыл добавить файл | `git add путь/к/файлу` и `git commit --amend --no-edit` (если ещё не пушил) |
| Написал не то в commit | `git commit --amend -m "Новое сообщение"` (если ещё не пушил) |

---

## Кодировка

- **Сообщения коммитов:** используй **английский** — так на GitHub не будет кракозябр. Шаблон в `.gitmessage`.
- **Файлы проекта:** UTF-8, см. `.editorconfig`.
- При ручном `git commit -m "..."` в PowerShell кириллица может искажаться; для новых коммитов предпочтительно английские сообщения.

---

## Чего не коммитить

В `.gitignore` уже исключены: `.env`, ключи, `node_modules`, логи.
