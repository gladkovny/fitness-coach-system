# Система алиасов упражнений

**Подход:** академическое (каноническое) название в `name`, разговорные и социальные варианты в `aliases`.

---

## Принцип

| Поле | Содержимое |
|------|------------|
| **name** | Каноническое название (академический стиль): «Махи гантелей в стороны», «Разгибание рук на блоке» |
| **aliases** | JSONB-массив вариантов для распознавания: `["махи с гантелями", "отведение плеча с гантелями", "махи в стороны"]` |

---

## Логика распознавания

1. **Точное совпадение по aliases** — ввод приводится к нормализованному виду и сравнивается с каждым алиасом.
2. **Точное совпадение по name**
3. **Fuzzy match** — containment, stem, context (как раньше)

---

## Добавление алиасов

В Supabase SQL Editor:

```sql
UPDATE exercises
SET aliases = '["новый вариант", "еще вариант"]'::jsonb
WHERE name = 'Каноническое название';
```

Или merge с существующими:

```sql
UPDATE exercises
SET aliases = COALESCE(aliases, '[]'::jsonb) || '["доп. алиас"]'::jsonb
WHERE name = 'Каноническое название';
```

---

## Примеры (каноническое → алиасы)

| name (каноническое) | aliases |
|---------------------|---------|
| Махи гантелей в стороны | махи с гантелями, отведение плеча с гантелями, махи в стороны, отведение плеча в тренажере |
| Разгибание рук на блоке | разгибания на блоке, трицепс на блоке |
| Сгибание рук со штангой | сгибание на бицепс, бицепс со штангой |
| Подтягивания | подтяг, подтягивания на перекладине |

---

**Миграция:** `00011_exercises_aliases.sql`
