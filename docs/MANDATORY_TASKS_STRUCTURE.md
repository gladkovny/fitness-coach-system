# Обязательные задачи — Supabase

**Цель:** отображать **конкретное действие** (например, «Выход силой через две руки»), а не только категорию. Задачи выполняются перед каждой тренировкой, фиксируются галочкой, в дашборде показывается количество выполнений.

---

## Структура в Supabase

### Таблица `mandatory_tasks` (0–3 на клиента)

| Поле | Описание | Пример |
|------|----------|--------|
| **id** | UUID | `uuid` |
| **client_id** | Ссылка на клиента | `uuid` |
| **name** | Конкретное действие | `Выход силой через две руки` |
| **category** | Категория для группировки | `Навык`, `Разминка`, `Заминка` |
| **sort_order** | Порядок показа | 0, 1, 2 |
| **active** | Активна ли задача | true/false |

### Таблица `mandatory_task_log`

| Поле | Описание |
|------|----------|
| **session_id** | Сессия тренировки (опционально) |
| **task_id** | Ссылка на mandatory_tasks |
| **created_at** | Дата/время отметки |

Каждая галочка в трекере создаёт запись в `mandatory_task_log`.

---

## Как добавить задачи

1. **При создании блока** — в модалке «Создать блок» есть поля «Задача 1», «Задача 2», «Задача 3» и выпадающий список категории (Навык, Выход, Разминка, Заминка, Растяжка и т.д.).
2. **Через SQL** (если нужно вручную):
   ```sql
   INSERT INTO mandatory_tasks (client_id, name, category, sort_order)
   VALUES ('uuid-клиента', 'Выход силой через две руки', 'Навык', 0);
   ```

---

## Отображение

- **Трекер:** чекбоксы с названием задачи, кнопка «Отметить выполненные».
- **Дашборд:** `completionCount` — сколько раз задача была выполнена (считается из `mandatory_task_log`).

---

## Миграция

`00012_mandatory_tasks.sql` — выполнить в Supabase SQL Editor.
