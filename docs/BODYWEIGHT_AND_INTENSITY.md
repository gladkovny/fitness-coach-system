# Работа с собственным весом и коэффициент нагрузки

## 1. Почему у Подтягиваний «30 кг» — это не 30 повторений

**30 кг** = **эквивалентный вес** для расчёта интенсивности, а не добавленный вес и не количество повторений.

```
effectiveWeight = вес_клиента × exercises.bodyweight_ratio
```

Пример: клиент 46 кг, подтягивания (ratio 1.0) → 46 × 1.0 = **46 кг**. Отжимания (ratio 0.66) → 46 × 0.66 ≈ **30 кг**.

---

## 2. Коэффициент нагрузки — индивидуально по упражнению

**0.65 как общий default неверен.** Подтягивания и отжимания от пола сильно отличаются:

| Упражнение | bodyweight_ratio | Обоснование |
|------------|------------------|-------------|
| Подтягивания, брусья, выходы силой | 1.0 | 100% веса тела |
| Отжимания от пола | 0.66 | ~66% (исследования: руки+ноги) |
| Гиперэкстензия | 0.5 | Частичная нагрузка |
| Подъём ног в висе | 0.35 | Только ноги |
| Скручивания, планка | 0.4 | Пресс, частичная |

Миграция **00009** задаёт эти значения в `exercises.bodyweight_ratio` для каждого упражнения.

---

## 3. Персональные данные клиента (вес)

Расчёт: `effectiveWeight = clientWeight × exercise.bodyweight_ratio`

**Источники веса (приоритет):**

1. `clients.profile.weight` — основной вес клиента
2. `daily_logs.weight` — последняя запись по дате
3. `body_composition.weight` — последняя запись InBody/аналог

Трекер и дашборд должны брать вес из `profile` или `daily_logs`. Миграция **00010** документирует структуру `profile`.

---

## 4. Google Sheets (GAS)

- **Exercises**: колонка `bodyweightRatio` (0–1), **индивидуально** по упражнению
- **Goals / ClientProfile**: `start_weight`, `weight` — вес клиента

---

## 5. Supabase (после миграций 00009, 00010)

| Таблица | Колонка | Описание |
|---------|---------|----------|
| `exercises` | `bodyweight_ratio` | NUMERIC, 0–1. Индивидуально по упражнению |
| `exercises` | `equipment` | `'свой вес'` для bodyweight |
| `clients` | `profile` | JSONB: `weight`, `startWeight`, `mainGoals` |
| `daily_logs` | `weight` | Вес на дату (резервный источник) |

---

## 4. Рекомендации по отображению

### Рекорды

- **weight > 0, equipment = 'свой вес'** → показывать, например: «30 кг (экв.)» или «макс. 10 раз»
- **weight = 0** (bodyweight без эквивалента) → показывать «X раз» (макс. reps)

### Прогресс

- История по датам: массив `{ date, weight, reps }` для графика роста интенсивности.
